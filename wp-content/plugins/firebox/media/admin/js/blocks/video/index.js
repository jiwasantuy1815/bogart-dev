(()=>{var e={9894:()=>{const e="SET_BREAKPOINT",t={breakpoint:"desktop"};wp.data.select("fpframework-breakpoints")||wp.data.registerStore("fpframework-breakpoints",{reducer:(o=t,r)=>r.type===e?{...o,breakpoint:r.breakpoint}:o,actions:{onBreakpointSet:t=>({type:e,breakpoint:t})},selectors:{getBreakpoint:e=>e.breakpoint}})},4184:(e,t)=>{var o;!function(){"use strict";var r={}.hasOwnProperty;function n(){for(var e=[],t=0;t<arguments.length;t++){var o=arguments[t];if(o){var a=typeof o;if("string"===a||"number"===a)e.push(o);else if(Array.isArray(o)){if(o.length){var i=n.apply(null,o);i&&e.push(i)}}else if("object"===a){if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]")){e.push(o.toString());continue}for(var l in o)r.call(o,l)&&o[l]&&e.push(l)}}}return e.join(" ")}e.exports?(n.default=n,e.exports=n):void 0===(o=function(){return n}.apply(t,[]))||(e.exports=o)}()},2703:(e,t,o)=>{"use strict";var r=o(414);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,o,n,a,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return o.PropTypes=o,o}},5697:(e,t,o)=>{e.exports=o(2703)()},414:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},5251:(e,t,o)=>{"use strict";var r=o(9196),n=Symbol.for("react.element"),a=(Symbol.for("react.fragment"),Object.prototype.hasOwnProperty),i=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};t.jsx=function(e,t,o){var r,s={},c=null,d=null;for(r in void 0!==o&&(c=""+o),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:n,type:e,key:c,ref:d,props:s,_owner:i.current}}},5893:(e,t,o)=>{"use strict";e.exports=o(5251)},9281:(e,t,o)=>{"use strict";var r=o(7889);function n(){}function a(){}a.resetWarningCache=n,e.exports=function(){function e(e,t,o,n,a,i){if(i!==r){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}function t(){return e}e.isRequired=e;var o={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:n};return o.PropTypes=o,o}},1277:(e,t,o)=>{e.exports=o(9281)()},7889:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},9196:e=>{"use strict";e.exports=window.React}},t={};function o(r){var n=t[r];if(void 0!==n)return n.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,o),a.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";const e=window.wp.blocks;var t=o(9196);const r=window.wp.i18n,n=window.wp.blockEditor,a=window.wp.element,i=window.wp.components,l=window.wp.data;var s=o(4184),c=o.n(s),d=o(5697),u=o.n(d);const p=window.wp.primitives,m=(0,a.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(p.Path,{d:"M20.5 16h-.7V8c0-1.1-.9-2-2-2H6.2c-1.1 0-2 .9-2 2v8h-.7c-.8 0-1.5.7-1.5 1.5h20c0-.8-.7-1.5-1.5-1.5zM5.7 8c0-.3.2-.5.5-.5h11.6c.3 0 .5.2.5.5v7.6H5.7V8z"})),b=(0,a.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(p.Path,{d:"M17 4H7c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H7c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h10c.3 0 .5.2.5.5v12zm-7.5-.5h4V16h-4v1.5z"})),f=(0,a.createElement)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,a.createElement)(p.Path,{d:"M15 4H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm.5 14c0 .3-.2.5-.5.5H9c-.3 0-.5-.2-.5-.5V6c0-.3.2-.5.5-.5h6c.3 0 .5.2.5.5v12zm-4.5-.5h2V16h-2v1.5z"}));o(9894);const v=({label:e,children:o,childrenClass:r="",wrapperClass:n=""})=>{const a=[{value:"desktop",icon:(0,t.createElement)(i.Icon,{icon:m}),title:"Desktop"},{value:"tablet",icon:(0,t.createElement)(i.Icon,{icon:b}),title:"Tablet"},{value:"mobile",icon:(0,t.createElement)(i.Icon,{icon:f}),title:"Mobile"}],s=(0,l.useSelect)((e=>e("fpframework-breakpoints").getBreakpoint())),{onBreakpointSet:c}=(0,l.useDispatch)("fpframework-breakpoints"),d=a.find((e=>e.value===s));return(0,t.createElement)(i.BaseControl,{__nextHasNoMarginBottom:!0},(0,t.createElement)("div",{className:`wp-block-fpframework-responsive-control-wrap ${n}`},(0,t.createElement)(i.__experimentalHStack,{justify:"space-between",spacing:"4",className:"fpf-responsive-control-header"},e&&(0,t.createElement)(i.BaseControl.VisualLabel,{className:"fpf-responsive-control-label"},e),(0,t.createElement)(i.DropdownMenu,{icon:d.icon,label:"Select breakpoint",controls:a.map((e=>({icon:e.icon,title:e.title,isActive:e.value===s,onClick:()=>c(e.value)})))})),(0,t.createElement)("div",{className:"wp-block-fpframework-responsive-control-wrap__content"+(r?" "+r:"")},o(s))))},_=({setAttributes:e,attributeKey:o,attributes:n,label:a,breakpoint:l,positionsLabels:s=[],positions:c=["top","right","bottom","left"]})=>{const d=n[o],u=c[0],p=c[1],m=c[2],b=c[3],f=n[o]?.linked;return(0,t.createElement)("div",{className:"wp-block-fpframework-control-spacing components-base-control"},a&&(0,t.createElement)("p",{className:"wp-block-fpframework-control-spacing-label"},a),(0,t.createElement)("div",{className:"wp-block-fpframework-control-spacing-controls-wrap"},(0,t.createElement)("div",{className:"wp-block-fpframework-control-spacing-controls"},c.map(((r,n)=>{var a;return(0,t.createElement)("div",{key:n,className:"wp-block-fpframework-spacing-controls-item"},(0,t.createElement)(i.TextControl,{value:l?d?.[l]?.[r]:d?.[r],type:"number",min:-200,max:200,step:1,onChange:t=>((t,r)=>{if(l)return f?void e({[o]:{...d,[l]:{...d[l],[u]:t,[p]:t,[m]:t,[b]:t}}}):void e({[o]:{...d,[l]:{...d[l],[r]:t}}});e(f?{[o]:{...d,[u]:t,[p]:t,[m]:t,[b]:t}}:{[o]:{...d,[r]:t}})})(t,r),__nextHasNoMarginBottom:!0}),(0,t.createElement)("p",{className:"label",dangerouslySetInnerHTML:{__html:null!==(a=s[r])&&void 0!==a?a:r}}))}))),(0,t.createElement)(i.Button,{variant:f?"primary":"secondary",className:"components-toolbar__control",label:(0,r.__)("Link Values","fpf-framework"),icon:"admin-links",onClick:()=>{e({[o]:{...d,linked:!f}})}})))};var h=o(1277),g=o.n(h),w=o(5893);const y=(0,w.jsx)(p.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:(0,w.jsx)(p.Path,{d:"m13.06 12 6.47-6.47-1.06-1.06L12 10.94 5.53 4.47 4.47 5.53 10.94 12l-6.47 6.47 1.06 1.06L12 13.06l6.47 6.47 1.06-1.06L13.06 12Z"})}),k=({label:e="",value:o="",defaultValue:r="",onChange:n})=>{const[l,s]=(0,a.useState)(!1),c=(0,a.useRef)(o||r),d=(0,a.useRef)(null),u=(0,a.useCallback)((e=>{d.current&&clearTimeout(d.current);let t=e;e?.rgb&&parseInt(e?.rgb?.a)<1?t=`rgb(${e.rgb.r}, ${e.rgb.g}, ${e.rgb.b}, ${e.rgb.a})`:e?.hex&&(t=e.hex),c.current=t,d.current=setTimeout((()=>{n(t)}),10)}),[n]);return(0,t.createElement)(BaseControl,{label:e,__nextHasNoMarginBottom:!0,className:"firebox-color-picker-control"},(0,t.createElement)(i.__experimentalInputControl,{value:o||r,onChange:n,suffix:(0,t.createElement)(t.Fragment,null,(o||r)&&(0,t.createElement)(i.Button,{onClick:()=>n(""),icon:y,iconSize:18,variant:"tertiary"}),(0,t.createElement)("div",{onClick:()=>s(!0),style:{width:"24px",height:"24px",borderRadius:"50%",backgroundColor:o||"transparent",border:"1px solid #ddd",cursor:"pointer",marginRight:"8px"}})),className:"firebox-color-picker",__next40pxDefaultSize:!0}),l&&(0,t.createElement)(t.Fragment,null,(0,t.createElement)(i.Popover,{className:"firebox-full-width-popover",position:"bottom right",onClose:()=>s(!1),onFocusOutside:()=>s(!1)},(0,t.createElement)(i.ColorPicker,{color:c.current,onChangeComplete:u,enableAlpha:!0}))))},x={attributes:g().object.isRequired,setAttributes:g().func.isRequired,attributePrefix:g().string,maxBorderWidth:g().number,showBorderRadius:g().bool,defaultValues:g().shape({color:g().string,radius:g().object,width:g().string})},E=({attributes:e,setAttributes:o,attributePrefix:n="block",title:l="",defaultValues:s={},maxBorderWidth:c=100,showBorderRadius:d=!0})=>{const u=n?e[`${n}BorderColor`]:e.borderColor,p=n?e[`${n}BorderWidth`]:e.borderWidth,m=n?e[`${n}BorderStyle`]:e.borderStyle,b=n?`${n}BorderRadius`:"borderRadius";return(0,t.createElement)(a.Fragment,null,(0,t.createElement)(i.SelectControl,{label:l,value:m,options:[{value:"none",label:(0,r.__)("None","fpf-framework")},{value:"solid",label:(0,r.__)("Solid","fpf-framework")},{value:"dotted",label:(0,r.__)("Dotted","fpf-framework")},{value:"dashed",label:(0,r.__)("Dashed","fpf-framework")},{value:"double",label:(0,r.__)("Double","fpf-framework")},{value:"groove",label:(0,r.__)("Groove","fpf-framework")},{value:"ridge",label:(0,r.__)("Ridge","fpf-framework")}],onChange:e=>{o(n?{[`${n}BorderStyle`]:e}:{borderStyle:e})}}),"none"!==m&&!!m&&(0,t.createElement)(a.Fragment,null,(0,t.createElement)(k,{value:u||"",defaultValue:s.color||"",label:(0,r.__)("Border color","fpf-framework"),disableAlpha:!1,onChange:e=>{o(n?{[`${n}BorderColor`]:e}:{borderColor:e})}}),(0,t.createElement)(i.RangeControl,{label:(0,r.__)("Border Width (px)","fpf-framework"),min:0,max:c,value:p,onChange:e=>{o(n?{[`${n}BorderWidth`]:e}:{borderWidth:e})},step:1,initialPosition:s.width||0,allowReset:!0})),d&&(0,t.createElement)(v,{label:(0,r.__)("Border Radius (px)","fpf-framework")},(n=>(0,t.createElement)(_,{attributeKey:b,attributes:e,setAttributes:o,breakpoint:n,positions:["top_left","top_right","bottom_right","bottom_left"],positionsLabels:{top_left:`<div>${(0,r.__)("TOP","fpf-framework")}</div><div>${(0,r.__)("LEFT","fpf-framework")}</div>`,top_right:`<div>${(0,r.__)("TOP","fpf-framework")}</div><div>${(0,r.__)("RIGHT","fpf-framework")}</div>`,bottom_right:`<div>${(0,r.__)("BOTTOM","fpf-framework")}</div><div>${(0,r.__)("RIGHT","fpf-framework")}</div>`,bottom_left:`<div>${(0,r.__)("BOTTOM","fpf-framework")}</div><div>${(0,r.__)("LEFT","fpf-framework")}</div>`}}))))};E.propTypes=x;const C=E,B={value:g().object.isRequired,onUpdate:g().func.isRequired},I=({value:e,onUpdate:o})=>{const{type:n,top:l,left:s,spread:c,color:d,width:u}=null!=e?e:{},p=t=>{o({...e,...t})};return(0,t.createElement)(a.Fragment,null,(0,t.createElement)(i.SelectControl,{label:(0,r.__)("Type","fpf-framework"),value:n,options:[{value:"none",label:(0,r.__)("None","fpf-framework")},{value:"outset",label:(0,r.__)("Outset","fpf-framework")},{value:"inset",label:(0,r.__)("Inset","fpf-framework")}],onChange:e=>{p({type:e})},__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"none"!==n&&!!n&&(0,t.createElement)(a.Fragment,null,(0,t.createElement)(k,{wrapperClass:"fpframework-gutenberg-p-t-0",value:d,defaultValue:"",label:(0,r.__)("Color","fpf-framework"),disableAlpha:!1,onChange:e=>{p({color:e})}}),(0,t.createElement)(i.RangeControl,{label:(0,r.__)("Blur (px)","fpf-framework"),min:0,max:100,value:u,onChange:e=>{p({width:e||0})},step:1,initialPosition:7,allowReset:!0}),(0,t.createElement)(i.RangeControl,{label:(0,r.__)("Spread (px)","fpf-framework"),min:0,max:100,value:c,onChange:e=>{p({spread:e||0})},step:1,initialPosition:0,allowReset:!0}),(0,t.createElement)(i.RangeControl,{label:(0,r.__)("Left (px)","fpf-framework"),min:-100,max:100,value:s,onChange:e=>{p({left:e||0})},step:1,initialPosition:0,allowReset:!0}),(0,t.createElement)(i.RangeControl,{label:(0,r.__)("Top (px)","fpf-framework"),min:-100,max:100,value:l,onChange:e=>{p({top:e||0})},step:1,initialPosition:0,allowReset:!0})))};I.propTypes=B;const T=I,S={videoInfo:u().object.isRequired,attributes:u().object.isRequired,setAttributes:u().func.isRequired,setHideOnClick:u().func.isRequired,instanceId:u().string},$=({videoInfo:e,attributes:o,setAttributes:l,setHideOnClick:s,instanceId:c})=>{const{coverImage:d,controls:u,autoplay:p,autopause:m,mute:b,loop:f,branding:h,startTime:g,endTime:w,backgroundColor:y,coverImageType:x,boxShadow:E,privacyMode:B}=o,I=(0,a.useRef)(),S=`video-block__coverImage-image-description-${c}`;return(0,t.createElement)(n.InspectorControls,null,(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Video","firebox"),initialOpen:!0},(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Autoplay"),checked:p,onChange:e=>l({autoplay:e}),help:(0,r.__)("Set whether to autoplay videos. The video to autoplay may require user interaction with the site as well as will honor browser privacy settings. Muting the video should ensure autoplay works in most cases.","firebox"),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Autopause"),help:(0,r.__)("The video will be auto paused when it goes outside the viewport (video becomes hidden).","firebox"),checked:m,onChange:e=>l({autopause:e}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Muted"),checked:b,onChange:e=>l({mute:e}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Loop"),checked:f,onChange:e=>l({loop:e}),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.TextControl,{label:(0,r.__)("Start time in seconds.","firebox"),onChange:e=>l({startTime:e}),type:"number",value:g,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),"youtube"===e.provider&&(0,t.createElement)(i.TextControl,{label:(0,r.__)("End time in seconds.","firebox"),onChange:e=>l({endTime:e}),type:"number",value:w,__next40pxDefaultSize:!0,__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Show Controls"),checked:u,onChange:e=>l({controls:e}),help:(0,r.__)("Set whether to show player controls.","firebox"),__nextHasNoMarginBottom:!0}),u&&"youtube"===e.provider&&(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Modest Branding"),checked:h,onChange:e=>l({branding:e}),help:(0,r.__)("If enabled, the video will hide the YouTube logo.","firebox"),__nextHasNoMarginBottom:!0}),(0,t.createElement)(i.ToggleControl,{label:(0,r.__)("Privacy-Enhanced Mode"),checked:B,onChange:e=>l({privacyMode:e}),help:(0,r.__)("When you turn on privacy-enhanced mode, the video service won't store information about visitors on your website unless they play the video.","firebox"),__nextHasNoMarginBottom:!0})),(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Block","firebox"),initialOpen:!1},(0,t.createElement)(v,{label:(0,r.__)("Margin (px)","firebox")},(e=>(0,t.createElement)(_,{attributeKey:"margin",attributes:o,setAttributes:l,breakpoint:e}))),(0,t.createElement)(v,{label:(0,r.__)("Padding (px)","firebox")},(e=>(0,t.createElement)(_,{attributeKey:"padding",attributes:o,setAttributes:l,breakpoint:e})))),(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Cover Image","firebox"),initialOpen:!1},(0,t.createElement)(i.RadioControl,{options:[{label:(0,r.__)("No Cover Image","firebox"),value:"none"},{label:(0,r.__)("Auto (From video provider)","firebox"),value:"auto"},{label:(0,r.__)("Custom","firebox"),value:"custom"}],selected:x,onChange:t=>l({coverImageType:t,coverImage:"auto"===t?"youtube"===e.provider?"https://img.youtube.com/vi/"+e.id+"/maxresdefault.jpg":"vimeo"===e.provider?"https://vumbnail.com/"+e.id+".jpg":d:"custom"===t?d:""})}),"custom"===x&&(0,t.createElement)(n.MediaUploadCheck,null,(0,t.createElement)(i.BaseControl,{className:"editor-video-coverImage-control"},(0,t.createElement)(n.MediaUpload,{title:(0,r.__)("Select Cover Image","firebox"),onSelect:e=>{l({coverImage:e.url}),s(!1)},allowedTypes:["image"],render:({open:e})=>(0,t.createElement)(i.Button,{variant:"secondary",onClick:e,ref:I,"aria-describedby":S},d?(0,r.__)("Replace image"):(0,r.__)("Select Image"))}),(0,t.createElement)("p",{id:S,hidden:!0},d?sprintf((0,r.__)("The current cover image url is %s"),d):(0,r.__)("There is no cover image currently selected")),!!d&&(0,t.createElement)(i.Button,{className:"fpframework-gutenberg-m-l-5",onClick:()=>{l({coverImage:""}),I.current.focus()},isLink:!0,isDestructive:!0},(0,r.__)("Remove Image"))))),(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Colors","firebox"),initialOpen:!1},(0,t.createElement)(k,{label:(0,r.__)("Background Color","firebox"),value:y,onChange:e=>l({backgroundColor:e})})),(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Border","firebox"),initialOpen:!1},(0,t.createElement)(C,{attributes:o,setAttributes:l,attributePrefix:""})),(0,t.createElement)(i.PanelBody,{title:(0,r.__)("Box Shadow","firebox"),initialOpen:!1},(0,t.createElement)(v,{label:(0,r.__)("Box Shadow","firebox")},(e=>(0,t.createElement)(T,{value:E[e],onUpdate:t=>l({boxShadow:{...E,[e]:t}})})))))};$.propTypes=S;const O=$,R=e=>`block-${e}`,P=(e,t)=>e[t]&&"true"===e[t]?1:0,N=e=>{const t=e.split(/(vi\/|v%3D|v=|\/v\/|youtu\.be\/|\/embed\/|shorts\/)/);return void 0!==t[2]?t[2].split(/[^\w-]/i)[0]:t[0]},j=[/^https?:\/\/((m|www)\.)?youtube\.com\/.+/i,/^https?:\/\/youtu\.be\/.+/i],L=()=>void 0!==window.YT?.Player,M=e=>{const t=e.dataset;new window.YT.Player(e,{videoId:t.videoId,playerVars:{autoplay:0,controls:P(t,"videoControls"),showinfo:0,modestbranding:P(t,"videoBranding"),loop:P(t,"videoLoop"),playlist:t.videoId,fs:0,cc_load_policy:0,iv_load_policy:3,autohide:0,mute:P(t,"videoMute"),start:parseInt(t.videoStart,10)||void 0,end:parseInt(t.videoEnd,10)||void 0},events:{}})},D=e=>{let t=e.split("?")[0].split("/");return t[t.length-1]},q=[/^https?:\/\/(www\.)?vimeo\.com\/.+/i],A=()=>void 0!==window.Vimeo?.Player,V=e=>{const t=e.dataset,o=new window.Vimeo.Player(e,{id:t.videoId,loop:P(t,"videoLoop"),autoplay:0,controls:P(t,"videoControls"),byline:!1,title:!1,autopause:!1,muted:P(t,"videoMute")});t.videoStart&&o.setCurrentTime(t.videoStart)},H=(e,t=[])=>t.some((t=>e.match(t))),U=[/([a-zA-Z0-9\s_\\.\-\(\):])+(.webm|.mkv|.avi|.mov|.mp4|.ogg)/i],W=(e="")=>e?H(e,j)?{id:N(e),provider:"youtube",url:e}:H(e,q)?{id:D(e),provider:"vimeo",url:e}:H(e,U)?{id:e,provider:"self",url:e}:{id:null,provider:"unsupported"}:null,z=({url:e,onVideoUrlChange:t})=>{const[o,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(W(e)),l=(0,a.useCallback)((e=>{null!=e&&r(e)}),[]);return(0,a.useEffect)((()=>{(async()=>{o&&("youtube"===n.provider&&n.id&&M&&(await(()=>{if(!document.querySelector(".fpframework-youtube-api-script")&&!L()){const e=document.createElement("script");e.className="fpframework-youtube-api-script",e.src="https://www.youtube.com/player_api";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}const e=t=>{L()?t(!0):setTimeout((()=>e(t)),350)};return new Promise(((t,o)=>{e(t,o)}))})(),M(o)),"vimeo"===n.provider&&n.id&&V&&(await(async()=>{if(!document.querySelector(".fpframework-vimeo-api-script")&&!A()){const e=document.createElement("script");e.className="fpframework-vimeo-api-script",e.src="https://player.vimeo.com/api/player.js";const t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}const e=t=>{A()?t(!0):setTimeout((()=>e(t)),350)};return new Promise(((t,o)=>{e(t,o)}))})(),V(o)))})()}),[o]),{videoInfo:n,handleVideoUrlChange:e=>{let o=W(e);i(o),t?.(e,o)},videoEmbedRef:l}},F=e=>!!e&&Object.values(e).some((e=>null!=e&&""!==e)),K={desktop:"",tablet:991,mobile:575},G=(e=[])=>{if(!e||!e.length)return[];const t=e.reduce(((e,t)=>{const o=(e=>{if(!e)return"";const t=e.match(/[^{\}]+(?=})/gi)[0];return{selector:e.replace(t,"").replace("{","").replace("}","").trim(),style:t.trim()}})(t),r=e.find((({selector:e})=>e===o.selector));return r?(r.styles.push(o.style),e):(e.push({selector:o.selector,styles:[o.style]}),e)}),[]);return t.map((e=>`${e.selector} { ${e.styles.join(" ")} }`))},Y=e=>({...e,rules:G(e.rules)}),Z=({id:e,value:t,rule:o,unit:n="",edgeCase:a=[],breakpoint:i="desktop",oneline:l=!1})=>{if(null==t||""===t)return null;let s=o.includes("[BLOCK_ID]")?o.replace("[BLOCK_ID]",e):`${o}`;if((e=>["box-shadow"].some((t=>e.includes(t))))(o))return["inset","outset"].includes(t.type)&&""!==t.color?(0,r.sprintf)(s,`${t.left}px ${t.top}px ${t.width}px ${t.spread}px ${"outset"===t.type?"":t.type} ${t.color}`):null;if((e=>["text-shadow"].some((t=>e.includes(t))))(o))return""!==t.hpos&&""!==t.vpos&&""!==t.blur&&""!==t.color?(0,r.sprintf)(s,`${t.hpos}px ${t.vpos}px ${t.blur}px ${t.color}`):null;if((e=>["padding","border-radius","margin","position-items"].some((t=>e.includes(t)))&&!["padding-","margin-"].some((t=>e.includes(t))))(o)){let e=o.match(/margin|border-radius|padding|position-items/gi)[0];if("position-items"===e){const e=["top","right","bottom","left"].map((e=>{if(null!=t[e]&&""!==t[e])return`${e}: ${"auto"===t[e]?"auto":`${t[e]}${n}`};`})).join(" ");return e.trim()?(c=` ${e} `,s.replace(/[^{\}]+(?=})/gi,c)):null}{const o=((e,t,o="",r=!1)=>{if(!e)return!1;if(F(e)||F(e[t])){const n=e[t]||e;if(["margin","padding"].includes(o)){if(4===Object.values(n).length&&1===new Set(Object.values(n)).size)return`${n.top}px`;if(Object.values(n).every((e=>""!==e))){if(n.top===n.bottom&&n.left===n.right)return`${n.top||0}px ${n.left||0}px`;Object.values(n).map((function(e){return`${e||0}px`})).join(" ")}let e=[],t=["top","right","bottom","left"];return r?(t.forEach((t=>{e.push(`${n[t]||0}px`)})),e.join(" ")):(t.forEach((t=>{""!==n[t]&&e.push(o+"-"+t+":"+n[t]+"px;")})),e)}if("border-radius"===o){if(4===Object.values(n).length&&1===new Set(Object.values(n)).size)return`${n.top_left}px`;if(Object.values(n).every((e=>""!==e))){if(n.top_left===n.bottom_right&&n.bottom_left===n.top_right)return`${n.top_left||0}px ${n.bottom_left||0}px`;Object.values(n).map((function(e){return`${e||0}px`})).join(" ")}let e=[],t=["top_left","top_right","bottom_right","bottom_left"];return r?(t.forEach((t=>{e.push(`${n[t]||0}px`)})),e.join(" ")):(t.forEach((t=>{""!==n[t]&&e.push("border-"+t.replace("_","-")+"-radius:"+n[t]+"px;")})),e)}}return!1})(t,null,e,l);if(!o)return null;if(o&&"string"==typeof o)return(0,r.sprintf)(s,o)||null;if(o&&"object"==typeof o)return s=s.replace("margin: ",""),s=s.replace("padding: ",""),s=s.replace("border-radius: ",""),s=s.replace("%s;","%s"),(0,r.sprintf)(s,o.join(""))||null}}var c;if((e=>!!e&&"object"==typeof e&&"url"in e&&"attachment"in e&&"repeat"in e)(t)){if(!t.url)return;const e=[`background-image: ${"none"!==t.url?`url(${t.url})`:"none"};`,`background-repeat: ${t.repeat};`,`background-size: ${t.size};`,`background-position: ${t.position};`,`background-attachment: ${t.attachment};`].join(" ");return(0,r.sprintf)(s,e)}if(a){const e=a.find((({edge:e})=>e===t));if(e)return""===e.value||e.skipInBreakpoints&&e.skipInBreakpoints.includes(i)?null:(n=e.unit||"",(0,r.sprintf)(s,`${e.value}${n}`))}return(0,r.sprintf)(s,`${t}${n}`)},J=e=>a.Children.toArray(e).map((e=>Array.isArray(e.props.children)?J(e.props.children):e)).reduce(((e,t)=>Array.isArray(t)?[...e,...t]:[...e,t]),[]).filter((e=>e.type&&"Rule"===e.type.displayName)),Q={children:g().oneOfType([g().node,g().array]),id:g().string},X=({id:e="",children:o})=>{const r=(({id:e,children:t,getCSSRule:o,mapper:r=(e=>e)})=>{const n=[{name:"desktop",media:"max",width:K.desktop,rules:[]},{name:"tablet",media:"max",width:K.tablet,rules:[]},{name:"mobile",media:"max",width:K.mobile,rules:[]},{name:"desktop-only",media:"min",width:K.tablet+1,rules:[]},{name:"tablet-only",media:"min",width:K.mobile+1,rules:[]}];return J(t).reduce(((t,r)=>{const{value:n,rule:a,unit:i,edgeCase:l,breakpointLimit:s,oneline:c}=r.props;if(null==n)return t;if("object"!=typeof n||!("desktop"in n)){const r=t.find((({name:e})=>"desktop"===e)),s=o({id:e,value:n,rule:a,unit:i,edgeCase:l,breakpoint:"desktop",oneline:c});return null!=s&&r.rules.push(s),t}return Object.keys(n).forEach((r=>{const d=t.find((({name:e})=>s&&"mobile"!==r?`${r}-only`===e:e===r)),u=o({id:e,value:n[r],rule:a,unit:i,edgeCase:l,breakpoint:r,oneline:c});null!=u&&d&&d.rules.push(u)})),t}),n).map(r)})({id:e,children:o,getCSSRule:Z,mapper:Y});return(e=>e.every((e=>0===e.rules.length)))(r)?null:(0,t.createElement)("style",{dangerouslySetInnerHTML:{__html:(n=r,n.reduce(((e,t)=>{if(!t.rules.length)return e;const o=t.rules.map((e=>e.trim())).join("\n");return t.width?"tablet-only"===t.name?`${e}\n\n\t\t\t\t@media (min-width: ${K.mobile+1}px) and (max-width: ${K.tablet}px) {\n\t\t\t\t\t${o}\n\t\t\t\t}\n\t\t\t\t`:`${e}\n\n\t\t\t@media (${t.media}-width: ${t.width}px) {\n\t\t\t\t${o}\n\t\t\t}\n\t\t\t`:`${e}${o}\n`}),"").trim())}});var n};X.propTypes=Q;const ee=X,te={value:g().oneOfType([g().string,g().number,g().object]).isRequired,rule:g().string.isRequired,unit:g().oneOf(["","px","%","em","rem","vh","vw","pt","cm","mm"]),edgeCase:g().arrayOf(g().shape({edge:g().any.isRequired,value:g().oneOfType([g().string,g().number]).isRequired,skipInBreakpoints:g().array})),breakpointLimit:g().bool,oneline:g().bool},oe=()=>null;oe.displayName="Rule",oe.propTypes=te;const re=oe,ne=({attributes:e,prefix:t="block"})=>{const o=(({attributes:e,prefix:t="block"})=>{const o=t?`${t}BorderColor`:"borderColor",r=e&&o in e?e[o]:null,n=t?`${t}BorderWidth`:"borderWidth",a=e&&n in e?e[n]:null,i=t?`${t}BorderStyle`:"borderStyle",l=e&&i in e?e[i]:null;return l&&"none"!==l?{borderColor:r||void 0,borderStyle:"none"!==l&&l?l:void 0,borderWidth:null!=a?`${a}px`:void 0}:{borderColor:void 0,borderStyle:void 0,borderWidth:void 0}})({attributes:e,prefix:t});return o.borderWidth&&o.borderStyle&&o.borderColor?`${o.borderWidth} ${o.borderStyle} ${o.borderColor}`:""},ae={attributes:u().object.isRequired,children:u().node},ie=({attributes:e,children:o})=>{const{uniqueId:r,margin:n,padding:a,borderRadius:i,coverImage:l,backgroundColor:s}=e,c=R(r);return(0,t.createElement)(ee,{id:c},(0,t.createElement)(re,{value:n,rule:".wp-block-firebox-video.[BLOCK_ID] { margin: %s; }",unit:"px"}),(0,t.createElement)(re,{value:a,rule:".wp-block-firebox-video.[BLOCK_ID] { padding: %s; }",unit:"px"}),(0,t.createElement)(re,{value:s,rule:".wp-block-firebox-video.[BLOCK_ID] { --background-color: %s; }"}),(0,t.createElement)(re,{value:l,rule:".wp-block-firebox-video.[BLOCK_ID] .fpf-video-embed-overlay { --cover-image: url('%s'); }"}),(0,t.createElement)(re,{value:ne({attributes:e,prefix:""}),rule:".wp-block-firebox-video.[BLOCK_ID] { --border: %s; }",unit:""}),(0,t.createElement)(re,{value:i,rule:".wp-block-firebox-video.[BLOCK_ID] { --border-radius: %s; }",oneline:!0}),(({attributes:e,selector:o=""})=>(0,t.createElement)(re,{value:e.boxShadow,rule:o+" { box-shadow: %s !important; }",unit:""}))({attributes:e,selector:".wp-block-firebox-video.[BLOCK_ID]"}),o)};ie.propTypes=ae;const le=ie,se=()=>(0,t.createElement)("svg",{width:"24",height:"24",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,t.createElement)("circle",{cx:"24",cy:"24",r:"20",stroke:"#2438E9",strokeWidth:"3",fill:"white"}),(0,t.createElement)("path",{d:"M31 22.2679C32.3333 23.0377 32.3333 24.9623 31 25.7321L22 30.9282C20.6667 31.698 19 30.7358 19 29.1962L19 18.8038C19 17.2642 20.6667 16.302 22 17.0718L31 22.2679Z",stroke:"#2438E9",strokeWidth:"3"})),ce=window.lodash;(0,e.registerBlockType)("firebox/video",{icon:se,edit:({className:e,attributes:o,setAttributes:s,instanceId:d,clientId:u,isSelected:p})=>{const{uniqueId:m,videoUrl:b,coverImage:f,coverImageType:v,startTime:_,endTime:h,controls:g,autoplay:w,mute:y,loop:k,branding:x}=o,{addUniqueID:E}=(0,l.useDispatch)("firebox/data"),{isUniqueID:C,isUniqueBlock:B,parentData:I}=(0,l.useSelect)((e=>({isUniqueID:t=>e("firebox/data").isUniqueID(t),isUniqueBlock:(t,o)=>e("firebox/data").isUniqueBlock(t,o),parentData:{rootBlock:e("core/block-editor").getBlock(e("core/block-editor").getBlockHierarchyRootClientId(u)),postId:e("core/editor")?.getCurrentPostId()?e("core/editor")?.getCurrentPostId():"",reusableParent:e("core/block-editor").getBlockAttributes(e("core/block-editor").getBlockParentsByBlockName(u,"core/block").slice(-1)[0]),editedPostId:!!e("core/edit-site")&&e("core/edit-site").getEditedPostId()}})),[u]);(0,a.useEffect)((()=>{const e=function(e){const{postId:t,reusableParent:o,editedPostId:r}=e,n=function(e,t,o="block-unknown"){return(0,ce.has)(t,"ref")?t.ref:e||o}(t,o,0);return 0===n&&r?function(e){for(var t=5381,o=e.length;o;)t=33*t^e.charCodeAt(--o);return t>>>0}(r)%1e6:n}(I);let t=function(e,t,o,r,n="",a=!1){const i=e&&2===e.split("_").length,l=(n?n+"_":"")+t.substr(2,9);return!e||i&&e.split("_")[0]!==n.toString()?o(l)?l:(0,ce.uniqueId)(l):o(e)||r(e,t)?e:a?(0,ce.uniqueId)(l):l}(m,u,C,B,e);t!==m?(o.uniqueId=t,s({uniqueId:t}),E(t,u)):(s({uniqueId:m}),E(m,u))}),[]);const T=R(m),[S,$]=(0,a.useState)(!1),[P,N]=(0,a.useState)(!b),[j,L]=(0,a.useState)(!1),M=(0,a.useRef)(),{videoInfo:D,handleVideoUrlChange:q,videoEmbedRef:A}=z({url:b,onVideoUrlChange:(e,t)=>{s({videoUrl:e,coverImage:"auto"===v?"youtube"===t.provider?"https://img.youtube.com/vi/"+t.id+"/maxresdefault.jpg":"vimeo"===t.provider?"https://vumbnail.com/"+t.id+".jpg":f:"custom"===v?f:""})}});if(!p&&j&&L(!1),P){const o=(0,n.useBlockProps)({id:T,className:c()(e,T,{"fpf-video":!0,"wp-block":!0})});return(0,t.createElement)("div",{...o},(0,t.createElement)(i.Placeholder,{icon:se,label:(0,r.__)("FireBox Video Block"),className:"wp-block-embed",instructions:(0,r.__)("Paste a YouTube or Vimeo video URL to embed on your site.","firebox"),isColumnLayout:!1},(0,t.createElement)("form",{onSubmit:e=>{e?.preventDefault(),N(!1)}},(0,t.createElement)("input",{type:"url",value:b,className:"components-placeholder__input","aria-label":(0,r.__)("embed-url"),placeholder:(0,r.__)("Enter URL to embed...","firebox"),onChange:e=>q(e.target.value)}),b&&"unsupported"!==D.provider&&(0,t.createElement)(i.Button,{isPrimary:!0,type:"submit"},(0,r.__)("Embed","firebox")),"unsupported"===D?.provider&&(0,t.createElement)("div",null,(0,r.__)("Invalid URL entered. Please enter a valid YouTube or Vimeo URL.","firebox")))))}const V=(0,n.useBlockProps)({className:c()({"wp-block":!0})});return(0,t.createElement)("div",{...V},(0,t.createElement)("div",{id:T,className:c()(e,T,"wp-block-firebox-video","fpf-video")},(0,t.createElement)(le,{attributes:o}),(0,t.createElement)(O,{videoInfo:D,attributes:o,setAttributes:s,setHideOnClick:$,instanceId:d}),(0,t.createElement)("div",{className:"fpf-video-embed-wrapper"},(0,t.createElement)("div",{className:"fpf-video-embed",ref:A,"data-video-id":D.id,"data-video-controls":g,"data-video-type":D.provider,"data-video-mute":y,"data-video-loop":k,"data-video-start":_,"data-video-end":h,"data-video-autoplay":w,"data-video-branding":x},(0,t.createElement)("div",{id:`video-${T}`})),f&&!S&&(0,t.createElement)("div",{ref:M,className:"fpf-video-embed-overlay",onClick:()=>$(!0)},(0,t.createElement)("div",{className:"play-button"}))),!j&&(0,t.createElement)("div",{className:"firebox-video-embed-interactive-overlay",onMouseUp:()=>L(!0)})),(0,t.createElement)(n.BlockControls,null,(0,t.createElement)(i.ToolbarGroup,null,(0,t.createElement)(i.ToolbarButton,{className:"components-icon-button components-toolbar__control",label:(0,r.__)("Change video URL"),onClick:()=>N(!0),icon:"edit"}))))},save:()=>null})})()})();