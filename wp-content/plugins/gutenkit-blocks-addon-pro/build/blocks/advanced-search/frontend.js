document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".wp-block-gutenkit-pro-advanced-search").forEach((e=>{((e,t)=>{const s=JSON.parse(e.getAttribute("data-settings")),r={categoryButton:e.querySelector(".gkit-select-category-btn"),categoryOptionList:e.querySelector(".gkit-search-category-options"),categoryDropdownMenu:e.querySelector(".gkit-select-category-menu"),categoryContent:e.querySelector(".gkit-select-category-content"),clearSearchButton:e.querySelector(".gkit-clear-search-button"),searchInputField:e.querySelector(".gkit_search-field"),searchResultContainer:e.querySelector(".gkit-search-result-dropdown"),searchResultBtn:e.querySelector(".gkit-more-search-result-btn"),searchButton:e.querySelector(".gkit_search-button"),searchResultWrapper:e.querySelector(".gkit-search-dropdown"),searchResultCount:e.querySelector(".gkit-search-result-header"),searchResultBtnWrapper:e.querySelector(".gkit-search-btn-wrapper"),toggleButton:e.querySelector(".gkit-clicked-button"),toggleSearchContainer:e.querySelector(".gkit-search-container"),toggleIcon:e.querySelectorAll(".gkit-toggle-icon"),popupOverlay:e.querySelector(".gkit-searchbar-overlay"),popupInitialStyle:e.querySelector(".gkit-initial-overlay-style"),searchSpinner:e.querySelector(".gkit-clear-search-spinner")};let a,o="";const c=void 0===(n=a)||""===n;var n;const l=e=>{e?(r?.searchSpinner?.classList.add("show"),r?.clearSearchButton?.classList.remove("active")):(r?.searchSpinner?.classList.remove("show"),r?.clearSearchButton?.classList.add("active"))},i=(e,t,a,o)=>{c||l(!0),fetch(e.url,{method:"POST",headers:{"Content-Type":"application/json","X-WP-Nonce":e.nonce},body:JSON.stringify(t)}).then((e=>{if(!e.ok)throw new Error("No Record Found");return e.json()})).then((e=>{a(e),c||l(!1),!e?.post_count||e.post_count<s.postsPerPage?r.searchResultBtn.style.display="none":r.searchResultBtn.style.display="block"})).catch((e=>{r.searchResultWrapper.innerHTML='<p class="gkit-search-no-result">No Record Found</p>',r.searchResultCount.style.display="none",r.searchResultBtnWrapper.style.display="none",c||l(!1)}))};r?.categoryButton?.addEventListener("click",(()=>{r?.categoryDropdownMenu?.classList.toggle("active")})),r?.clearSearchButton?.addEventListener("click",(e=>{e.preventDefault(),r.searchInputField.value="",r?.clearSearchButton?.classList.remove("active"),r?.searchResultContainer?.classList.remove("active")})),r.toggleButton?.addEventListener("click",(e=>{r?.toggleSearchContainer?.classList.toggle("show-toogle-search"),r?.searchResultContainer?.classList.remove("active"),r.searchInputField.value="",r.toggleIcon.forEach((e=>{e.classList.toggle("gkit-show-search-icon"),e.classList.toggle("gkit-hide-search-icon"),e.classList.toggle("gkit-rotate")}))})),r?.popupInitialStyle?.addEventListener("click",(e=>{r?.toggleSearchContainer?.classList.toggle("show"),r?.popupInitialStyle?.classList.add("hide"),r?.popupOverlay?.classList.add("show")})),window.addEventListener("click",(e=>{r?.toggleSearchContainer?.contains(e.target)||r?.popupInitialStyle?.contains(e.target)||r?.searchResultBtn?.contains(e.target)||(r?.toggleSearchContainer?.classList.remove("show"),r?.popupInitialStyle?.classList.remove("hide"),r?.popupOverlay?.classList.remove("show"),r?.categoryDropdownMenu?.classList.remove("active"))})),r?.searchInputField?.addEventListener("focus",(()=>{r?.categoryDropdownMenu?.classList.remove("active")})),r?.categoryOptionList?.addEventListener("click",(e=>{const a=e.target,c=a.closest(".gkit-search-category-option");c&&c.dataset.settings&&(o=JSON.parse(c.dataset.settings),i(t,{block:t.block,post_type:s.postType,search:r.searchInputField.value.trim(),posts_per_page:s.postsPerPage,taxonomy:s.taxonomy,terms:o},(e=>{r.searchResultWrapper.innerHTML=e.content,r.searchResultCount.innerText=`Total ${e.post_count} Results`,r.searchResultBtnWrapper.style.display="block"}))),r.categoryContent.innerText=a.innerText,r?.categoryDropdownMenu?.classList.remove("active")})),void 0!==a&&""!==a||r?.searchButton?.setAttribute("disabled","true"),r.searchInputField?.addEventListener("input",(e=>{a=e.target.value.trim(),a&&t.block&&t.url?(r?.searchButton?.removeAttribute("disabled"),r?.clearSearchButton?.classList.add("active"),s?.showSearchResult&&r?.searchResultContainer?.classList.add("active"),clearTimeout(window.searchDebounce),window.searchDebounce=setTimeout((()=>{i(t,{block:t.block,post_type:s.postType,search:a,posts_per_page:s.postsPerPage,taxonomy:s.taxonomy,terms:o},(e=>{r.searchResultWrapper.innerHTML=e.content,r.searchResultCount.innerText=`Total ${e.post_count} Results`,r.searchResultCount.style.display="block",r.searchResultBtnWrapper.style.display="block"}))}),300)):(r?.searchButton?.setAttribute("disabled","true"),r?.clearSearchButton?.classList.remove("active"),r?.searchResultContainer?.classList.remove("active"))})),r.searchResultBtn?.addEventListener("click",(e=>{e.preventDefault(),i(t,{block:t.block,post_type:s.postType,search:r.searchInputField.value.trim(),posts_per_page:-1,taxonomy:s.taxonomy,terms:o},(e=>{r.searchResultWrapper.innerHTML=e.content,r.searchResultCount.innerText=`Total ${e.post_count} Results`,r.searchResultCount.style.display="block",r.searchResultBtnWrapper.style.display="none"}))})),r.popupOverlay?.addEventListener("click",(()=>{r.searchInputField.value="",r?.clearSearchButton?.classList.remove("active"),r?.searchResultContainer?.classList.remove("active"),c&&r?.searchButton?.setAttribute("disabled","true")})),r.popupInitialStyle?.addEventListener("click",(()=>{r?.searchInputField?.focus()})),r?.searchInputField?.addEventListener("keydown",(e=>{if("Enter"===e.key&&(e.preventDefault(),a)){const e=window.location.origin;window.location.href=`${e}/?s=${encodeURIComponent(a)}`}}))})(e,window.advancedSearchData)}))}));