(()=>{"use strict";const e=window.React,t=window.wp.element,l=window.wp.components,a=window.wp.primitives,n=(0,e.createElement)(a.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,e.createElement)(a.Path,{d:"M11 12.5V17.5H12.5V12.5H17.5V11H12.5V6H11V11H6V12.5H11Z"})),o=window.wp.i18n;function r(){return(Date.now().toString(36)+Math.random().toString(36).substring(2,8)).substring(0,8)}const i=(0,t.memo)((({repeaterFields:a=[],children:i,onChange:c,itemLabelName:s="",defaultLabel:u="Item",addUniqueId:m=!1})=>{const{isNull:d}=window.gutenkit.helpers,{cloneIcon:p,closeIcon:b}=window.gutenkit.controlIcon;return(0,e.createElement)("div",{className:"gkit-repeater"},a&&a.map(((n,o)=>{let g=((e,t,l,a)=>t&&e[t]&&e[t].trim().length>0&&e[t].length>22?e[t].substring(0,22):t&&e[t]&&e[t].trim().length>0&&e[t].length<=22?e[t]:`${a} #${l+1}`)(n,s,o,u);return(0,e.createElement)("div",{key:o,className:"gkit-repeater__item gkit-control-wrap"},(0,e.createElement)(l.PanelBody,{title:g,initialOpen:!1,className:"gkit-repeater__item__panel"},(0,e.createElement)("div",{className:"gkit-repeater__item-content"},t.Children.toArray(i).map(((e,l)=>{const r=((e,t,l)=>{if(t[l]){let a=t[l];if(!d(e?.props?.condition)){const{props:t}=e;return"parent"===t?.condition?.type?t?.condition?.name===t?.condition?.value:a[t?.condition?.name]===t?.condition?.value}return!0}})(e,a,o);if(r){const r=e?.props?.name;return(0,t.cloneElement)(e,{key:l,...r?{value:n[r],onChange:e=>((e,t,l)=>{const n=JSON.parse(JSON.stringify(a));n[e][t]=l,c(n)})(o,r,e)}:{id:n.id}})}})))),(0,e.createElement)("div",{className:"repeater-action-btns"},(0,e.createElement)(l.Button,{className:"gkit-repeater__item__clone-button gkit-repeater__item__action-button",icon:p,label:"Clone Item",tooltipPosition:"top",onClick:()=>(e=>{const t=[...a],l={...t[e]};m&&(l.id=r()),t.splice(e+1,0,l),c(t)})(o)}),(0,e.createElement)(l.Button,{className:"gkit-repeater__item__delete-button gkit-repeater__item__action-button",icon:b,label:"Delete Item",tooltipPosition:"top",onClick:()=>(e=>{const t=[...a];t.splice(e,1),c(t)})(o)})))})),(0,e.createElement)(l.Button,{className:"gkit-repeater__add-button",icon:n,variant:"primary",onClick:()=>{const e={};m&&(e.id=r()),t.Children.toArray(i).forEach((t=>{t.props.name&&(e[t.props.name]=t.props.default||"")})),c([...a,e])}},(0,o.__)("Add Item","gutenkit-blocks-addon")))})),c=window.wp.compose,s=[{label:"Element",options:[{label:"Click",value:"click"},{label:"Hover",value:"hover"},{label:"Focus",value:"focus"},{label:"Blur",value:"blur"},{label:"Mouse Enter",value:"mouseenter"},{label:"Mouse Leave",value:"mouseleave"},{label:"Enter Viewport",value:"enterviewport"},{label:"Leave Viewport",value:"leaveviewport"}]},{label:"Browser/Window",options:[{label:"Scroll",value:"scroll"},{label:"Content Loaded",value:"contentloaded"},{label:"Mouse Leave Window",value:"mouseleavewindow"}]}],u=(0,t.memo)((({onChange:t,value:l})=>{const{GkitComplexSelect:a,GkitNumber:n}=window.gutenkit.components;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a,{label:(0,o.__)("Trigger","gutenkit-blocks-addon-pro"),value:l?.trigger,onChange:e=>t({...l,trigger:e}),options:s,isClearable:!0,isSearchable:!0}),"scroll"===l?.trigger?.value&&(0,e.createElement)(n,{label:(0,o.__)("Offset","gutenkit-blocks-addon-pro"),value:l?.scrollThreshold,onChange:e=>t({...l,scrollThreshold:e}),min:0,max:1e4,step:1,placeholder:"0"}))})),m=[{label:"Show Element",value:"show"},{label:"Hide Element",value:"hide"},{label:"Toggle Element",value:"toggle"},{label:"Set Attribute",value:"setAttribute"},{label:"Remove Attribute",value:"removeAttribute"},{label:"Toggle Attribute",value:"toggleAttribute"},{label:"Scroll To",value:"scrollTo"},{label:"Start Animation",value:"startAnimation"},{label:"ScaleX",value:"scaleX"},{label:"ScaleY",value:"scaleY"},{label:"Rotate",value:"rotate"},{label:"TranslateX",value:"translateX"},{label:"TranslateY",value:"translateY"},{label:"SkewX",value:"skewX"},{label:"SkewY",value:"skewY"},{label:"Opacity",value:"opacity"}],d=(0,t.memo)((({onChange:t,value:l})=>{const{GkitComplexSelect:a,GkitText:n,GkitChoose:r,GkitNumber:i,GkitAnimation:c}=window.gutenkit.components;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a,{label:(0,o.__)("Actions","gutenkit-blocks-addon-pro"),value:l?.action,onChange:e=>t({action:e}),options:m,isClearable:!0,isSearchable:!0}),("setAttribute"===l?.action?.value||"toggleAttribute"===l?.action?.value||"removeAttribute"===l?.action?.value)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{label:(0,o.__)("Attribute Key","gutenkit-blocks-addon-pro"),value:l?.attributeKey,onChange:e=>{const a=e.replace(/[^a-zA-Z0-9:._-]/g,"");/^[^a-zA-Z_:]/.test(a)&&(a=a.slice(1)),t({...l,attributeKey:a})},labelBlock:"block"}),(0,e.createElement)(n,{label:(0,o.__)("Attribute Value","gutenkit-blocks-addon-pro"),value:l?.attributeValue,onChange:e=>t({...l,attributeValue:e}),labelBlock:"block",help:"removeAttribute"===l?.action?.value?(0,o.__)("leave blank if you don't want to remove class","gutenkit-blocks-addon-pro"):""})),"scrollTo"===l?.action?.value&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(r,{label:(0,o.__)("Target","gutenkit-blocks-addon-pro"),value:l?.scrollToTarget||"cssSelector",onChange:e=>t({...l,scrollToTarget:e}),options:[{label:(0,o.__)("CSS Selector","gutenkit-blocks-addon-pro"),value:"cssSelector"},{label:(0,o.__)("Scroll Top","gutenkit-blocks-addon-pro"),value:"scrollTop"}],isToggle:!1}),"scrollTop"===l?.scrollToTarget?(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i,{label:(0,o.__)("Scroll Top(px)","gutenkit-blocks-addon-pro"),value:l?.scrollTop,onChange:e=>t({...l,scrollTop:e}),min:0,max:1e4,step:1,placeholder:"0"})):(0,e.createElement)(e.Fragment,null,(0,e.createElement)(n,{label:(0,o.__)("CSS Selector","gutenkit-blocks-addon-pro"),value:l?.cssSelector,onChange:e=>t({...l,cssSelector:e}),labelBlock:"block"}),(0,e.createElement)(i,{label:(0,o.__)("Offset(px)","gutenkit-blocks-addon-pro"),value:l?.offset,onChange:e=>t({...l,offset:e}),min:-1e3,max:1e3,step:1,placeholder:"0",help:(0,o.__)("Offset from the top of the element not the window","gutenkit-blocks-addon-pro")})),(0,e.createElement)(i,{label:(0,o.__)("Duration (ms)","gutenkit-blocks-addon-pro"),value:l?.duration,onChange:e=>t({...l,duration:e}),min:500,max:1e4,step:1,placeholder:"500"})),"startAnimation"===l?.action?.value&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(c,{label:(0,o.__)("Animation","gutenkit-blocks-addon"),value:l?.entranceAnimation,onChange:e=>{t({...l,entranceAnimation:e})}}),(0,e.createElement)("span",{className:"conflict-note"},(0,o.__)("It might conflict with the entrance animation in some cases. Please remove the entrance animation if you want to apply it here.","gutenkit-blocks-addon-pro"))),["scaleX","scaleY","rotate","translateX","translateY","skewX","skewY"].includes(l?.action?.value)&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i,{label:(0,o.__)(`${l?.action?.label}`,"gutenkit-blocks-addon-pro"),value:l?.[l?.action?.value],onChange:e=>t({...l,[l?.action?.value]:e}),min:0,max:1e3,step:.1,placeholder:"0"}),(0,e.createElement)(i,{label:(0,o.__)("Duration (ms)","gutenkit-blocks-addon-pro"),value:l?.duration,onChange:e=>t({...l,duration:e}),min:500,max:1e4,step:1,placeholder:"500"})),"opacity"===l?.action?.value&&(0,e.createElement)(e.Fragment,null,(0,e.createElement)(i,{label:(0,o.__)("Opacity","gutenkit-blocks-addon-pro"),value:l?.opacity,onChange:e=>t({...l,opacity:e}),min:0,max:1,step:.1,placeholder:"0"}),(0,e.createElement)(i,{label:(0,o.__)("Duration (ms)","gutenkit-blocks-addon-pro"),value:l?.duration,onChange:e=>t({...l,duration:e}),min:500,max:1e4,step:1,placeholder:"500"})))})),p=window.wp.data,b=(0,t.memo)((({id:t})=>{const{cloneIcon:a}=window.gutenkit.controlIcon,{createSuccessNotice:n}=(0,p.dispatch)("core/notices");if(!t)return null;const r=(0,c.useCopyToClipboard)(t,(()=>{n((0,o.__)("Interaction ID Copied Successfully","gutenkit-blocks-addon-pro"),{type:"snackbar",isDismissible:!0})}));return(0,e.createElement)(l.Flex,{className:"interaction-id"},(0,e.createElement)(l.FlexBlock,{className:"interaction-id-label"},(0,o.__)("Interaction ID","gutenkit-blocks-addon-pro")),(0,e.createElement)(l.FlexItem,{className:"interaction-id-value"},(0,e.createElement)(l.Button,{icon:a,ref:r,iconPosition:"right",label:"Copy",showTooltip:!0,tooltipPosition:"top"},(0,e.createElement)("span",{className:"interaction-id-value__text"},t))))})),g=[{label:"Self",value:"self"},{label:"CSS Selector",value:"selector"}],k=(0,t.memo)((({value:t,onChange:l})=>{const{GkitComplexSelect:a,GkitText:n}=window.gutenkit.components;return(0,e.createElement)(e.Fragment,null,(0,e.createElement)(a,{label:(0,o.__)("Selector","gutenkit-blocks-addon-pro"),value:t?.selector,onChange:e=>l({...t,selector:e}),options:g,isClearable:!0,isSearchable:!0,placeholder:"Self"}),"selector"===t?.selector?.value&&(0,e.createElement)(n,{label:(0,o.__)("Selector Value","gutenkit-blocks-addon-pro"),value:t?.cssSelector,onChange:e=>l({...t,cssSelector:e}),labelBlock:"block"}))})),v=(0,c.createHigherOrderComponent)((l=>a=>{const{tabName:n,clientId:r}=a;if("advanced"===n){const{getAttributes:n,setAttributes:c}=window?.gutenkit?.helpers,{GkitPanelBody:s}=window.gutenkit.components,m=n(r),p=(0,t.useCallback)((e=>{c(r,e)}),[r]);return(0,e.createElement)(l,{...a},a.children,(0,e.createElement)(s,{title:(0,o.__)("Interactions","gutenkit-blocks-addon-pro"),initialOpen:!1},(0,e.createElement)("div",{className:"gkit-interactions"},(0,e.createElement)(i,{defaultLabel:"Interaction",addUniqueId:!0,repeaterFields:m?.interactions,onChange:e=>p({interactions:e})},(0,e.createElement)(b,null),(0,e.createElement)(u,{name:"triggerSettings"}),(0,e.createElement)(d,{name:"actionSettings"}),(0,e.createElement)(k,{name:"selectorSettings"})))))}return(0,e.createElement)(l,{...a})}),"Settings");(0,window.wp.hooks.addFilter)("gutenkit.tabs.after-tab","gutenkit.interactions.controls",v,10)})();